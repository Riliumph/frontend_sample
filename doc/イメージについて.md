# イメージについて

イメージは下記の通り、[node公式](https://github.com/nodejs/docker-node/blob/main/README.md#how-to-use-this-image)を使っている。  
ベースOSはAlpineである。

```dockerfile
FROM node:17.4.0-alpine
WORKDIR /usr/src/app
```

## ビルド方法

```console
$ docker compose build
```

## プロジェクト作成

dockerのオプションによりDockerfileのCMDを上書きしてプロジェクト作成を行う。  
プロジェクトを作成する方法は以下の通り。どちらかを選ぶ

- `npx create-react-app ${PJ_NAME} --template typescript`
- `yarn create react-app ${PJ_NAME} --template typescript`

```console
$ export IMG_NAME="frontend"
$ export PJ_NAME="frontend"
$ docker compose run --rm frontend sh -c "yarn create react-app frontend --template typescript"
yarn add v1.22.17
info No lockfile found.
[1/4] Resolving packages...
（略）
[2/4] Fetching packages...
```

### 注意点

`docker run`の場合はイメージ名を使う

```console
$ docker run -it --rm web_app-frontend
```

このイメージ名は`docker compose build`により、フォルダ名＋サービス名で構築される。  

> ただし、`image: <name>:<tag>`で任意に指定可能

この名前は外の世界から見るとそのままなのだが、`compose`の世界ではサービス名だけで参照される。

- `docker         run web_app-frontend`
- `docker compose run frontend`

## 実行

```console
$ docker compose up -d
```

`http://localhot:8000`にアクセスする。

## 参考

- [【Docker】React+TypeScriptのDocker環境を構築する](https://zenn.dev/wakkunn/articles/2fa2943d1fc58f)
